<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="python基础知识(十六)"><meta name="keywords" content="python"><meta name="author" content="逆の神様"><meta name="copyright" content="逆の神様"><meta name="theme-color" content="#0078E7"><title>python基础知识(十六) | 逆の神様の小さな駅</title><link rel="shortcut icon" href="/fcg22450.github.io/favicon.png"><link rel="mask-icon" href="/fcg22450.github.io/favicon.png" color="#0078E7"><link rel="preload" href="/fcg22450.github.io/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/fcg22450.github.io/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/fcg22450.github.io/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/fcg22450.github.io/css/hexo-theme-yun.css"><script id="yun-config">
    let Yun = window.Yun || {};
    let CONFIG = {"root":"/fcg22450.github.io/","title":"逆の神様の小さな駅","version":"0.6.3","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"/fcg22450.github.io/data/sentences.json"},"fireworks":{"colors":["254, 185, 6","223, 47, 47","102, 167, 221","62, 131, 225","33, 78, 194","3, 28, 95","0, 8, 55"]}};
  </script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700&amp;family=Source+Code+Pro&amp;display=swap" media="none" onload="this.media='all'"><script src="//at.alicdn.com/t/font_1140697_rtqh36oinzl.js" async></script><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/fcg22450.github.io/css/prism.css" type="text/css"></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/fcg22450.github.io/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle sidebar-toggle-fixed hty-icon-button"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><aside class="sidebar"><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc sidebar-nav-active hty-icon-button" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/fcg22450.github.io/about" title="逆の神様"><img width="96" loading="lazy" src="/fcg22450.github.io/author.jpg" alt="逆の神様"></a><div class="site-author-name"><a href="/fcg22450.github.io/about/">逆の神様</a></div><a class="site-name" href="/fcg22450.github.io/about/site.html">逆の神様の小さな駅</a><sub class="site-subtitle">逆の神様の小さな駅</sub><div class="site-desciption">潦倒不通世务，愚顽怕读文章。</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/fcg22450.github.io/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item site-state-posts"><a href="/fcg22450.github.io/archives" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">140</span></a></div><div class="site-state-item site-state-categories"><a href="/fcg22450.github.io/categories" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">13</span></a></div><div class="site-state-item site-state-tags"><a href="/fcg22450.github.io/tags" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">17</span></a></div><a class="site-state-item hty-icon-button" href="http://fcg22450.gitee.io/new_blog/" target="_blank" rel="noopener" title="随笔"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=1263893578&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/fcg22450" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:fcg0322@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/6553522553" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="/fcg22450.git/images/wechat.jpg" title="微信" target="_blank" style="color:#1AAD19"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-2-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/317139394" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.now.sh/" title="Travelling" target="_blank" style="color:black"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/fcg22450.github.io/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/fcg22450.github.io/girls/" title="老婆们 ( 嚣张的我~o(*￣▽￣*)ブ~ )" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div></div><script defer src="/fcg22450.github.io/js/sidebar.js"></script><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#文件处理"><span class="toc-number">1.</span> <span class="toc-text">文件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本操作"><span class="toc-number">1.1.</span> <span class="toc-text">基本操作:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内置函数open"><span class="toc-number">1.2.</span> <span class="toc-text">内置函数open()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#可选模式"><span class="toc-number">1.2.1.</span> <span class="toc-text">可选模式:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#上下文管理"><span class="toc-number">1.2.2.</span> <span class="toc-text">上下文管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b模式"><span class="toc-number">1.2.3.</span> <span class="toc-text">b模式:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他参数"><span class="toc-number">1.2.4.</span> <span class="toc-text">其他参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#encoding"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">encoding</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#newline"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">newline</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他方法"><span class="toc-number">1.2.5.</span> <span class="toc-text">其他方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#循环文件的推荐方式"><span class="toc-number">1.2.6.</span> <span class="toc-text">循环文件的推荐方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例题"><span class="toc-number">1.3.</span> <span class="toc-text">例题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csv模块"><span class="toc-number">1.4.</span> <span class="toc-text">csv模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configparser模块"><span class="toc-number">1.5.</span> <span class="toc-text">configparser模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#生成"><span class="toc-number">1.5.1.</span> <span class="toc-text">生成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#读取"><span class="toc-number">1.5.2.</span> <span class="toc-text">读取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改"><span class="toc-number">1.5.3.</span> <span class="toc-text">修改</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://github.com/fcg22450/fcg22450.github.io/fcg22450.github.io/2019/08/24/python_foundation/016.html"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="逆の神様"><meta itemprop="description" content="python基础知识(十六)"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="逆の神様の小さな駅"></span><header class="post-header"><h1 class="post-title" itemprop="name headline" style="color: undefined">python基础知识(十六)</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <span class="post-meta-icon-text">发表于</span> <time title="创建时间：2019-08-24 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-24T00:00:00+08:00">2019-08-24</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <span class="post-meta-icon-text">更新于</span> <time title="修改时间：2020-06-01 13:57:28" itemprop="dateModified" datetime="2020-06-01T13:57:28+08:00">2020-06-01</time></div><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-category"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/fcg22450.github.io/categories/online-course/" itemprop="url" rel="index"><span itemprop="text">online_course</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/fcg22450.github.io/tags/python/"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">python</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content post-markdown"><h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作:"></a>基本操作:</h3><ol>
<li>打开文件,得到文件句柄并赋值给变量</li>
<li>通过句柄对文件进行操作</li>
<li>关闭文件</li>
</ol>
<pre class=" language-python"><code class="language-python">    f<span class="token operator">=</span>open<span class="token punctuation">(</span><span class="token string">"文件名"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#默认系统编码win下GBK</span>
    data<span class="token operator">=</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<h3 id="内置函数open"><a href="#内置函数open" class="headerlink" title="内置函数open()"></a>内置函数<code>open()</code></h3><h4 id="可选模式"><a href="#可选模式" class="headerlink" title="可选模式:"></a>可选模式:</h4><ul>
<li>只读”r”(默认)</li>
<li>只写”w” 如果文件存在则清空 不存在则新建</li>
<li>可读可写”r+”</li>
<li>追加写入”a”/“a+” 如<code>f=open(&quot;x.txt&quot;,&quot;a&quot;)</code></li>
</ul>
<pre class=" language-python"><code class="language-python">f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#连续读字符 默认全部读完</span>
f<span class="token punctuation">.</span>readable<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#是否可读</span>
f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#连续读行</span>
f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#用列表返回每一行，成员的换行符不会被忽略</span>

f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#连续写 "a"模式在末尾追加</span>
f<span class="token punctuation">.</span>writeable<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#是否可写</span>
f<span class="token punctuation">.</span>writelines<span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#将列表连续写行，成员的换行符需要带上，如["aaa\n","bbb\n","ccc\n"]</span></code></pre>
<h4 id="上下文管理"><a href="#上下文管理" class="headerlink" title="上下文管理"></a>上下文管理</h4><p>file对象实现了魔术方法<code>__enter__()</code> 和<code>__exit__()</code><br>所以可以使用 <code>with open() as f</code>的写法</p>
<h4 id="b模式"><a href="#b模式" class="headerlink" title="b模式:"></a>b模式:</h4><p>不能设置encoding “rb” 读二进制</p>
<pre class=" language-python"><code class="language-python">    data<span class="token operator">=</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p> “wb” 写二进制</p>
<pre class=" language-python"><code class="language-python">    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>bytes<span class="token punctuation">(</span><span class="token string">"内容"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p> “ab”追加</p>
<h4 id="其他参数"><a href="#其他参数" class="headerlink" title="其他参数"></a>其他参数</h4><h5 id="encoding"><a href="#encoding" class="headerlink" title="encoding"></a>encoding</h5><p>规定字符集</p>
<pre class=" language-python"><code class="language-python">file <span class="token operator">=</span> open<span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'Latin-1'</span><span class="token punctuation">)</span></code></pre>
<h5 id="newline"><a href="#newline" class="headerlink" title="newline"></a>newline</h5><p>规定换行效果，默认适应操作系统<br>对于用<code>\r\n</code>换行的系统，默认的<code>newline=&quot;\r&quot;</code>，故而只需要写入<code>&quot;\n&quot;</code>就相当于写入<code>&quot;\r\n&quot;</code><br>另一方面，设置<code>newline=&quot;&quot;</code>才能使用<code>&quot;\r\n&quot;</code>换行，下面是官方参考手册里的解释：</p>
<blockquote>
<p>In Python 2.X, it was required to open the csvfile with ‘b’ because the csv module does its own line termination handling.</p>
<p>In Python 3.X, the csv module still does its own line termination handling, but still needs to know an encoding for Unicode strings. The correct way to open a csv file for writing is:</p>
<pre class=" language-python"><code class="language-python">outputfile<span class="token operator">=</span>open<span class="token punctuation">(</span><span class="token string">"out.csv"</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">,</span>newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span></code></pre>
<p>encoding can be whatever you require, but newline=’’ suppresses text mode newline handling. On Windows, failing to do this will write \r\r\n file line endings instead of the correct \r\n. This is mentioned in the 3.X csv.reader documentation only, but csv.writer requires it as well.</p>
</blockquote>
<p>对于下文即将介绍的csv模块也是如此。</p>
<h4 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h4><pre class=" language-python"><code class="language-python">f<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#刷新</span>
f<span class="token punctuation">.</span>tell<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#当前光标所在位置</span>
f<span class="token punctuation">.</span>seek<span class="token punctuation">(</span>int<span class="token punctuation">,</span>int默认<span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#相对位置读字节</span>
<span class="token triple-quoted-string string">"""
    负数倒着读,只能b模式下使用
    第二个参数:
        0代表从文件开头开始算起
        1代表从当前位置开始算起
        2代表从文件末尾算起。
    utf的3字节一个汉字 seek(3)相当于从头开始read(1)
"""</span>
f<span class="token punctuation">.</span>truncate<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#截取字节</span></code></pre>
<h4 id="循环文件的推荐方式"><a href="#循环文件的推荐方式" class="headerlink" title="循环文件的推荐方式"></a>循环文件的推荐方式</h4><p>如:</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> f<span class="token punctuation">:</span>
    offs<span class="token operator">=</span><span class="token operator">-</span><span class="token number">10</span>
    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
        f<span class="token punctuation">.</span>seek<span class="token punctuation">(</span>offs<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
        data<span class="token operator">=</span>f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> len<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"最后一行是"</span><span class="token operator">+</span>data<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        offs<span class="token operator">*=</span><span class="token number">2</span></code></pre>
<p>不推荐:</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre>
<h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>现在有一个<code>recensement.txt</code>文件</p>
<pre class=" language-bash"><code class="language-bash">1     Paris     2229621
2     Marseille     855393
3     Lyon     500715
4     Toulouse     458298
5     Nice     342295
6     Nantes     292718
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
70     Drancy     68241
71     Colmar     67956
72     Ajaccio     67507
73     Bourges     67189
74     Issy-les-Moulineaux     65662
75     Levallois-Perret     65264</code></pre>
<p>将它转化为一个字典再求出所有数的和</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> json    <span class="token comment" spellcheck="true">#引入json模块只是为了好看,后面会讲</span>
<span class="token keyword">import</span> functools    <span class="token comment" spellcheck="true">#高阶函数functools.reduce以后会讲</span>
<span class="token keyword">with</span> open <span class="token punctuation">(</span><span class="token string">'recensement.txt'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span>
        k<span class="token operator">=</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        val<span class="token operator">=</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        dic<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>val
    <span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic<span class="token punctuation">,</span>sort_keys<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>separators<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    co<span class="token operator">=</span>functools<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span><span class="token keyword">lambda</span> r<span class="token punctuation">,</span>x<span class="token punctuation">:</span>int<span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">+</span>int<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>list<span class="token punctuation">(</span>dic<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"总和是%s"</span><span class="token operator">%</span>co<span class="token punctuation">)</span></code></pre>
<p>执行结果</p>
<pre class=" language-bash"><code class="language-bash"><span class="token punctuation">{</span>
  <span class="token string">"Aix-en-Provence "</span><span class="token keyword">:</span><span class="token string">"141545"</span>,
  <span class="token string">"Ajaccio "</span><span class="token keyword">:</span><span class="token string">"67507"</span>,
  <span class="token string">"Amiens "</span><span class="token keyword">:</span><span class="token string">"132699"</span>,
  <span class="token string">"Angers "</span><span class="token keyword">:</span><span class="token string">"150125"</span>,
  <span class="token string">"Antibes "</span><span class="token keyword">:</span><span class="token string">"75456"</span>,
  <span class="token string">"Argenteuil "</span><span class="token keyword">:</span><span class="token string">"106817"</span>,
<span class="token comment" spellcheck="true">#......</span>
  <span class="token string">"Toulouse "</span><span class="token keyword">:</span><span class="token string">"458298"</span>,
  <span class="token string">"Tourcoing "</span><span class="token keyword">:</span><span class="token string">"93974"</span>,
  <span class="token string">"Tours "</span><span class="token keyword">:</span><span class="token string">"134803"</span>,
  <span class="token string">"Versailles "</span><span class="token keyword">:</span><span class="token string">"85272"</span>,
  <span class="token string">"Villeurbanne "</span><span class="token keyword">:</span><span class="token string">"147192"</span>,
  <span class="token string">"Vitry-sur-Seine "</span><span class="token keyword">:</span><span class="token string">"90075"</span>
<span class="token punctuation">}</span>
总和是12470089</code></pre>
<h3 id="csv模块"><a href="#csv模块" class="headerlink" title="csv模块"></a>csv模块</h3><p>内置模块 读写csv表格<br>读取例子：</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv
filename <span class="token operator">=</span> <span class="token string">'名单.csv'</span>
<span class="token keyword">with</span> open<span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>list<span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>写入例子：</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv
filename <span class="token operator">=</span> <span class="token string">'单推名单.csv'</span>
csvFile <span class="token operator">=</span> open<span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>csvFile<span class="token punctuation">)</span>

fileHeader <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"姓名"</span><span class="token punctuation">,</span> <span class="token string">"年龄"</span><span class="token punctuation">)</span>
writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>fileHeader<span class="token punctuation">)</span>

data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"夏色祭"</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span>
writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

csvFile<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>正如前文中的描述，如果不设置<code>newline=&#39;&#39;</code>，将会导致csv写入空行。</p>
<h3 id="configparser模块"><a href="#configparser模块" class="headerlink" title="configparser模块"></a>configparser模块</h3><p>内置模块 适用于操作配置文件<br>常见文档格式如下：</p>
<pre class=" language-ini"><code class="language-ini"><span class="token selector">[DEFAULT]</span>
<span class="token constant">ServerAliveInterval</span> <span class="token attr-value"><span class="token punctuation">=</span> 45</span>
<span class="token constant">Compression</span> <span class="token attr-value"><span class="token punctuation">=</span> yes</span>
<span class="token constant">CompressionLevel</span> <span class="token attr-value"><span class="token punctuation">=</span> 9</span>
<span class="token constant">ForwardX11</span> <span class="token attr-value"><span class="token punctuation">=</span> yes</span>

<span class="token selector">[bitbucket.org]</span>
<span class="token constant">User</span> <span class="token attr-value"><span class="token punctuation">=</span> hg</span>

<span class="token selector">[topsecret.server.com]</span>
<span class="token constant">Port</span> <span class="token attr-value"><span class="token punctuation">=</span> 50022</span>
<span class="token constant">ForwardX11</span> <span class="token attr-value"><span class="token punctuation">=</span> no</span></code></pre>
<h4 id="生成"><a href="#生成" class="headerlink" title="生成"></a>生成</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> configparser

config <span class="token operator">=</span> configparser<span class="token punctuation">.</span>ConfigParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
config<span class="token punctuation">[</span><span class="token string">"DEFAULT"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'ServerAliveInterval'</span><span class="token punctuation">:</span> <span class="token string">'45'</span><span class="token punctuation">,</span>
                      <span class="token string">'Compression'</span><span class="token punctuation">:</span> <span class="token string">'yes'</span><span class="token punctuation">,</span>
                     <span class="token string">'CompressionLevel'</span><span class="token punctuation">:</span> <span class="token string">'9'</span><span class="token punctuation">,</span>
                     <span class="token string">'ForwardX11'</span><span class="token punctuation">:</span><span class="token string">'yes'</span>
                     <span class="token punctuation">}</span>
config<span class="token punctuation">[</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User'</span><span class="token punctuation">:</span><span class="token string">'hg'</span><span class="token punctuation">}</span>
config<span class="token punctuation">[</span><span class="token string">'topsecret.server.com'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Host Port'</span><span class="token punctuation">:</span><span class="token string">'50022'</span><span class="token punctuation">,</span><span class="token string">'ForwardX11'</span><span class="token punctuation">:</span><span class="token string">'no'</span><span class="token punctuation">}</span>

<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'example.ini'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> configfile<span class="token punctuation">:</span>
   config<span class="token punctuation">.</span>write<span class="token punctuation">(</span>configfile<span class="token punctuation">)</span></code></pre>
<h4 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> configparser
config <span class="token operator">=</span> configparser<span class="token punctuation">.</span>ConfigParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
config<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token string">'example.ini'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>sections<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># ['bitbucket.org', 'topsecret.server.com']</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'bytebong.com'</span> <span class="token keyword">in</span> config<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># False</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'bitbucket.org'</span> <span class="token keyword">in</span> config<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"user"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># hg</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">'DEFAULT'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Compression'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># yes</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">'topsecret.server.com'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'ForwardX11'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#no</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">#&lt;Section: bitbucket.org></span>

<span class="token keyword">for</span> key <span class="token keyword">in</span> config<span class="token punctuation">[</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>     <span class="token comment" spellcheck="true"># 注意,有default会默认default的键</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>

config<span class="token punctuation">.</span>options<span class="token punctuation">(</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 同for循环,找到'bitbucket.org'下所有键</span>
config<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#找到'bitbucket.org'下所有键值对</span>
config<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">,</span><span class="token string">'compression'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#获取'bitbucket.org'下key对应的value</span></code></pre>
<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> configparser
config <span class="token operator">=</span> configparser<span class="token punctuation">.</span>ConfigParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
config<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token string">'example.ini'</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#增加</span>
config<span class="token punctuation">.</span>add_section<span class="token punctuation">(</span><span class="token string">'yuan'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">#删除</span>
config<span class="token punctuation">.</span>remove_section<span class="token punctuation">(</span><span class="token string">'bitbucket.org'</span><span class="token punctuation">)</span>  
config<span class="token punctuation">.</span>remove_option<span class="token punctuation">(</span><span class="token string">'topsecret.server.com'</span><span class="token punctuation">,</span><span class="token string">"forwardx11"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">#修改</span>
config<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token string">'topsecret.server.com'</span><span class="token punctuation">,</span><span class="token string">'k1'</span><span class="token punctuation">,</span><span class="token string">'11111'</span><span class="token punctuation">)</span>
config<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token string">'yuan'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">,</span><span class="token string">'22222'</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">#保存修改</span>
<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'new2.ini'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> configfile<span class="token punctuation">:</span>
    config<span class="token punctuation">.</span>write<span class="token punctuation">(</span>configfile<span class="token punctuation">)</span></code></pre>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">我很可爱，请给我钱</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/alipay.png"><img loading="lazy" src="/fcg22450.github.io/images/alipay.png" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/qqpay.png"><img loading="lazy" src="/fcg22450.github.io/images/qqpay.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/weixin.png"><img loading="lazy" src="/fcg22450.github.io/images/weixin.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>逆の神様</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://github.com/fcg22450/fcg22450.github.io/2019/08/24/python_foundation/016.html" title="python基础知识(十六)">https://github.com/fcg22450/fcg22450.github.io/2019/08/24/python_foundation/016.html</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/fcg22450.github.io/2019/08/28/python_foundation/017.html" rel="prev" title="python基础知识(十七)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">python基础知识(十七)</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/fcg22450.github.io/2019/08/13/python_foundation/015.html" rel="next" title="python基础知识(十五)"><span class="post-nav-text">python基础知识(十五)</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>若您无 GitHub 账号，可直接在下方匿名评论。</span><br><span>若您想及时得到回复提醒，建议跳转 GitHub Issues 评论。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" href="https://github.com/fcg22450/fcg22450.github.io/issues?q=is:issue+python基础知识(十六)">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2018 – 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 逆の神様</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v4.2.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v0.6.3</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2018-09-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div><div id="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv" title="总访客量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-user-line"></use></svg></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="总访问量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg></span><span id="busuanzi_value_site_pv"></span></span></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div><script defer src="/fcg22450.github.io/js/hexo-theme-yun.js"></script><script src="/fcg22450.github.io/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>